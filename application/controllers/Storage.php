<?php
 defined('BASEPATH') OR exit('No direct script access allowed'); class Storage extends CI_Controller{ public function __construct(){ parent::__construct(); $this->load->model('query','',TRUE); $this->load->helper('basic'); $info = $this->query->userinfo()->values; $info = json_decode($info); is_login($info->username,$info->password); } public function localhost(){ $localhost = $this->query->storage('localhost'); $data['admin_title'] = '存储设置（localhost）'; $data['domains'] = $localhost->domains; $this->load->view('admin/header',$data); $this->load->view('admin/left'); $this->load->view('admin/localhost',$data); $this->load->view('admin/footer'); } public function setting(){ $data['admin_title'] = '存储设置'; $localhost = $this->query->storage('localhost'); $data['localhost']['domains'] = $localhost->domains; $data['localhost']['weight'] = $localhost->weight; $data['localhost']['permissions'] = $localhost->permissions; $backblaze = $this->query->storage('backblaze'); $data['b2']['domains'] = $backblaze->domains; $data['b2']['weight'] = $backblaze->weight; $data['b2']['switch'] = $backblaze->switch; $data['b2']['permissions'] = $backblaze->permissions; $cos = $this->query->storage('cos'); $data['cos']['domains'] = $cos->domains; $data['cos']['weight'] = $cos->weight; $data['cos']['switch'] = $cos->switch; $data['cos']['permissions'] = $cos->permissions; $ftp = $this->query->storage('ftp'); $data['ftp']['domains'] = $ftp->domains; $data['ftp']['weight'] = $ftp->weight; $data['ftp']['switch'] = $ftp->switch; $data['ftp']['permissions'] = $ftp->permissions; $qiniu = $this->query->storage('qiniu'); $data['qiniu']['domains'] = $qiniu->domains; $data['qiniu']['weight'] = $qiniu->weight; $data['qiniu']['switch'] = $qiniu->switch; $data['qiniu']['permissions'] = $qiniu->permissions; $this->load->view('admin/header',$data); $this->load->view('admin/left'); $this->load->view('admin/storage',$data); $this->load->view('admin/footer'); } public function backblaze(){ $backblaze = $this->query->storage('backblaze'); $data['admin_title'] = '存储设置（backblaze）'; $data['domains'] = $backblaze->domains; $data['switch'] = $backblaze->switch; if($backblaze->switch == 'ON'){ $data['status'] = 'checked'; } else{ $data['status'] = ''; } $this->load->view('admin/header',$data); $this->load->view('admin/left'); $this->load->view('admin/backblaze',$data); $this->load->view('admin/footer'); } } ?>